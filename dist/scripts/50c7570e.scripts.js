"use strict";var walternateApp=angular.module("walternateApp",["ngResource"]).config(["$routeProvider",function(a){a.when("/Relations/:movieId",{templateUrl:"views/relations.html",controller:"RelationsController"}).otherwise({redirectTo:"/"})}]);"use strict",walternateApp.controller("SearchController",["$scope","$resource",function(a,b){a.configuration=b("/api/configuration",{format:"json"}).get(),a.moviedb=b("/api/searchMovie/:title",{title:"@title",format:"json"}),a.search=function(b){a.movies=a.moviedb.get({title:b})},a.popular=function(a){return a.vote_count>10},a.clear=function(){a.movies={}}}]),"use strict",walternateApp.controller("RelationsController",["$scope","$resource","$routeParams","localNavigationStorage",function(a,b,c,d){a.configuration=b("/api/configuration",{format:"json"}).get(),a.graphdb=b("/query/:id",{id:"@id",format:"json"}),a.relations=a.graphdb.query({id:c.movieId}),d.add(c.movieId)}]),"use strict",walternateApp.controller("LocalNavigationController",["$scope","$rootScope","$resource","localNavigationStorage",function(a,b,c,d){a.configuration=c("/api/configuration",{format:"json"}).get(),b.$watch("localNavigation",function(b,c){a.history=b}),a.clearNavigation=function(){d.clear()}}]),"use strict",walternateApp.factory("localNavigationStorage",["$rootScope","$resource",function(a,b){var c="walternate-history",d=b("/api/movieInfo/:id",{id:"@id",format:"json"}),e=function(){return JSON.parse(localStorage.getItem(c)||"[]")};return{get:e,add:function(b){d.get({id:b},function(b){var d=e();(_.isEmpty(d)||b.id!=d[0].id)&&d.unshift(b),localStorage.setItem(c,JSON.stringify(d)),a.localNavigation=e()})},clear:function(){localStorage.removeItem(c),a.localNavigation=[]}}}]);